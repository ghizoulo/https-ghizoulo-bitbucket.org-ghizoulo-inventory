<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="" />
	<meta name="author" content="" />

	<title>Oritech</title>
	<style type="text/css">
		#test{
		    background-color: #86B1D6;
		    color:#F8F8F8;
		} 
		</style>
	<!-- Bootstrap Core CSS -->
	<link href="#{request.contextPath}/ressources/assets/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />

	<!-- MetisMenu CSS -->
	<link href="#{request.contextPath}/ressources/assets/bower_components/metisMenu/dist/metisMenu.min.css" rel="stylesheet" />

	<!-- DataTables CSS -->
	<link href="#{request.contextPath}/ressources/assets/bower_components/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet" />

	<!-- DataTables Responsive CSS -->
	<link href="#{request.contextPath}/ressources/assets/bower_components/datatables-responsive/css/dataTables.responsive.css" rel="stylesheet" />
	<link href="#{request.contextPath}/ressources/assets/bower_components/datatables/media/css/jquery.dataTables.css" rel="stylesheet" />
	<link href="#{request.contextPath}/ressources/assets/bower_components/datatables/media/css/jquery.dataTables.min.css" rel="stylesheet" />
	<link href="https://www.datatables.net/release-datatables/extensions/TableTools/css/dataTables.tableTools.css" rel="stylesheet" />
	<!-- Custom CSS -->
	<link href="#{request.contextPath}/ressources/assets/dist/css/sb-admin-2.css" rel="stylesheet" />

	<!-- Custom Fonts -->
	<link href="#{request.contextPath}/ressources/assets/bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
	<script>
		// 			document.getElementById('submit').addEventListener('click', function() {
		// 	            scannerTag();
		// 	          });

		// 	         function scannerTag(){
		// 				var idTag= 
		// 		         };
	</script>
</h:head>
<h:body>
	<div class="modal fade" id="stockPop" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header bg-orange">
             		<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icons-office-52"></i></button>
                	<h4 class="modal-title" id="myModalLabel">Choisir un stock</h4>
                </div>
                <div class="modal-body">           
	                <h:form role="form" class="form-validation" id="formDialogStock">
			       		<div class="form-group">
			       			<p:outputLabel for="stockP" value="Choisis un stock" /><br/>
			       			<h:selectOneMenu id="stockP" value="#{productBean.idStock}" styleClass="form-control">
			       				<f:selectItem itemValue="#{null}" itemLabel=" Sélectionnez " />
							    <f:selectItems value="#{stockBean.listStocks}" var="stock" itemValue="#{stock.id}" itemLabel="#{stock.nomStock}" />
							</h:selectOneMenu>
	               		</div>
	                   	<div class="modal-footer">
	                  		<p:commandButton onclick="closeModalStock()" value="Confirmer" action="#{productBean.addStock}" data-dismiss="modal" styleClass="btn btn-primary btn-embossed "/>
	                  		<p:button styleClass="btn btn-default" value="Annuler"/>
	                 	</div>
	               	</h:form>
	           	</div>
          	</div>
    	</div>
	</div>
	<div id="wrapper">

		<!-- Navigation -->
		<nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="../index.jsp">${loggedUser.firstName} ${loggedUser.lastName}</a>
			</div>
			<!-- /.navbar-header -->

			<ul class="nav navbar-top-links navbar-right">
				<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"> <i class="fa fa-bell fa-fw"></i>
						<i class="fa fa-caret-down"></i>
				</a>
					<ul class="dropdown-menu dropdown-alerts">
						<li><a href="#">
								<div>
									<i class="fa fa-comment fa-fw"></i> New Comment <span class="pull-right text-muted small">4 minutes ago</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<i class="fa fa-twitter fa-fw"></i> 3 New Followers <span class="pull-right text-muted small">12 minutes ago</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<i class="fa fa-envelope fa-fw"></i> Message Sent <span class="pull-right text-muted small">4 minutes ago</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<i class="fa fa-tasks fa-fw"></i> New Task <span class="pull-right text-muted small">4 minutes ago</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<i class="fa fa-upload fa-fw"></i> Server Rebooted <span class="pull-right text-muted small">4 minutes ago</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a class="text-center" href="#"> <strong>See All Alerts</strong> <i class="fa fa-angle-right"></i>
						</a></li>
					</ul> <!-- /.dropdown-alerts --></li>
				<!-- /.dropdown -->
				<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#"> <i class="fa fa-user fa-fw"></i>
						<i class="fa fa-caret-down"></i>
				</a>
					<ul class="dropdown-menu dropdown-user">
						<li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a></li>
						<li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a></li>
						<li class="divider"></li>
						<li><a href="login.html"><i class="fa fa-sign-out fa-fw"></i> Logout</a></li>
					</ul> <!-- /.dropdown-user --></li>
				<!-- /.dropdown -->
			</ul>
			<!-- /.navbar-top-links -->

			<div class="navbar-default sidebar" role="navigation">
				<div class="sidebar-nav navbar-collapse">
					<ul class="nav" id="side-menu">
						<li class="sidebar-search">
							<div class="input-group custom-search-form">
								<p:inputText type="text" styleClass="form-control" placeholder="Search#{request.contextPath}."></p:inputText>
								<span class="input-group-btn">
									<button class="btn btn-default" type="button">
										<i class="fa fa-search"></i>
									</button>
								</span>
							</div> <!-- /input-group -->
						</li>
						<li>
                            <a href="index.xhtml"><i class="fa fa-fw"></i> Accueil</a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-fw"></i>Dépots<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a id="test" href="depotListe.xhtml">Liste des dépots</a>
                                </li>
                                <li>
                                    <a id="test" href="ajouterDepot.xhtml">Ajouter un dépot</a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-fw"></i>Stock<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a id="test" href="stockListe.xhtml">Liste des stock</a>
                                </li>
                                <li>
                                    <a id="test" href="ajouterStock.xhtml">Ajouter un stock</a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-fw"></i>Famille de produits<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a id="test" href="familleListe.xhtml">Liste des familles</a>
                                </li>
                                <li>
                                    <a id="test" href="ajouterFamille.xhtml">Ajouter une famille</a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-fw"></i>Produits<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a id="test" href="productListe.xhtml">Liste des produits</a>
                                </li>
                                <li>
                                    <a id="test" href="ajouterProduit.xhtml">Ajouter un produit</a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
					</ul>
				</div>
				<!-- /.sidebar-collapse -->
			</div>
			<!-- /.navbar-static-side -->
		</nav>

		<div id="page-wrapper">
			<div class="row">
				<div class="col-lg-12 col-md-offset-1">
					<h3 class="page-header">Ajouter un nouveau produit</h3>
				</div>
				<!-- /.col-lg-12 -->
			</div>
			<!-- /.row -->
			<div class="row">
				<div class="col-xs-12 col-sm-6 col-md-8 col-md-offset-1">
					<h:form id="myform">
						<div class="form-group">
							<p:messages id="message" showDetail="true" autoUpdate="true" closable="true" />
						</div>
						<div class="form-group">
							<p:outputLabel for="tag" value="RFID Tag" /><br />
							<p:inputText id="tag" value="#{productBean.produit.idTag}" readonly="true" size="66" />
							<p:commandButton action="#{productBean.getTAG}" partialSubmit="true" styleClass="btn btn-warning" id="submit" update="tag" value="Scanner" />
							<p:outputLabel id="output" value="#{productBean.message}" />
						</div>
						<h:message class="warning" for="tag" id="newPassword1Error" />
						<div class="form-group">
							<p:outputLabel for="libelle" value="Libelle: * " />
							<p:inputText id="libelle" value="#{productBean.produit.libelle}" styleClass="form-control" />
						</div>
						<div class="form-group">
							<p:outputLabel for="designation" value="Designation: * " />
							<p:inputText id="designation" value="#{productBean.produit.designation}" styleClass="form-control" />
						</div>
						<div class="form-group">
							<p:outputLabel for="fournisseur" value="Fournisseur: * " />
							<p:inputText id="fournisseur" value="#{productBean.produit.fournisseur}" styleClass="form-control" />
						</div>
						<div class="form-group">
							<p:outputLabel for="famille" value="Séléctionnez une famille: * " /><BR />
							<h:selectOneMenu id="famille" value="#{productBean.idFamille}" styleClass="form-control">
								<f:selectItem itemValue="#{null}" itemLabel="-- Sélectionnez --" />
								 <f:selectItems value="#{familleBean.listFamilles}" var="famille" itemValue="#{famille.id}" itemLabel="#{famille.nomFamille}" />
								<p:ajax event="change" process="myform" update=":myform" listener="#{productBean.updateSelectedValue}" />
							</h:selectOneMenu>
						</div>
												<!-- ce panelgrid permet d'executer l'ajax vu que le selectonemenu est en jsf, je dois le changer en primefaces
												pour que ça fonctionne, mais il ya un blem au niveau du jquery,
												donc le input recupere le nomFamille saisi et affiche le message voulu -->
												
						<h:panelGrid columns="3">
							<h:outputText value="Keyup: " rendered="false"/>
							<p:inputText id="counter" value="#{productBean.famille.id}" rendered="false">
								<p:ajax event="keyup" process="myform" update=":myform:test" listener="#{productBean.updateSelectedValue}" />
							</p:inputText>
						</h:panelGrid>

						<div class="form-group">
							<p:panelGrid id="test" columns="1" rendered="#{productBean.afficheBloc}">
								<p:outputLabel for="prix" value="Prix:" />
								<p:spinner id="prix" value="#{productBean.famille.moyenPrix}" stepFactor="0.0" suffix=" Dh" size="78" />
								<p:outputLabel for="quantite" value="Quantité:" />
								<p:spinner id="quantite" value="#{productBean.famille.moyenQuantite}" stepFactor="0.0" size="78" />
							</p:panelGrid>
						</div>
						<div class="form-group">
							<a data-toggle="modal" data-target="#stockPop" >
		                   		<p:commandButton update=":formDialogStock" process="myform" value="CHOISIS UN STOCK MAINTEMENT "></p:commandButton>
	                   		</a> 
	                   		<h:outputText value=" ou choisis un stock plus tard!" /><BR />
						</div>
						<div class="form-group">
							<p:button styleClass="btn btn-default" value="Annuler" />
							<h:commandButton value="Confirmer" action="#{productBean.addProduit}" update="myform" styleClass="btn btn-primary btn-embossed" />
						</div>
					</h:form>
				</div>
			</div>
			<!-- /.row -->
		</div>
		<!-- /#page-wrapper -->
	</div>
	<!-- jQuery -->
	<script src="#{request.contextPath}/ressources/assets/bower_components/jquery/dist/jquery.min.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script src="#{request.contextPath}/ressources/assets/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

	<!-- Metis Menu Plugin JavaScript -->
	<script src="#{request.contextPath}/ressources/assets/bower_components/metisMenu/dist/metisMenu.min.js"></script>

	<!-- DataTables JavaScript -->
	<script src="#{request.contextPath}/ressources/assets/bower_components/datatables/media/js/jquery.dataTables.min.js"></script>
	<script src="https://www.datatables.net/release-datatables/extensions/TableTools/js/dataTables.tableTools.js"></script>

	<!-- Custom Theme JavaScript -->
	<script src="#{request.contextPath}/ressources/assets/dist/js/sb-admin-2.js"></script>
	<script>
		function closeModalStock(){
	    	$('#stockPop').modal('hide');
	  	}
	</script>
</h:body>
</html>
